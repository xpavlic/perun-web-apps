<h1 class="page-subtitle">
  {{'GROUP_DETAIL.SETTINGS.APPLICATION_FORM.TITLE' | translate}}
</h1>
<mat-spinner *ngIf="loading" class="ml-auto mr-auto">
</mat-spinner>
<div *ngIf="!loading && !noApplicationForm">
  <div class="d-flex w-50">
    <div class="w-50">
      <div class="font-weight-bold">{{'GROUP_DETAIL.SETTINGS.APPLICATION_FORM.MODULE_NAME' | translate}}:
        {{applicationForm.moduleClassName}}
      </div>
      <div>
        <span class="font-weight-bold">{{'GROUP_DETAIL.SETTINGS.APPLICATION_FORM.APPLICATION_TYPE' | translate}}</span>:

        <mat-icon class="align-text-bottom" matTooltip="Initial">arrow_right_alt</mat-icon>
        {{applicationForm.automaticApproval ?
        ('GROUP_DETAIL.SETTINGS.APPLICATION_FORM.AUTOMATIC'| translate) : ('GROUP_DETAIL.SETTINGS.APPLICATION_FORM.MANUAL'| translate)}},

        <mat-icon class="align-text-bottom" matTooltip="Extension">cached</mat-icon>
        {{applicationForm.automaticApprovalExtension ?
        ('GROUP_DETAIL.SETTINGS.APPLICATION_FORM.AUTOMATIC'| translate) : ('GROUP_DETAIL.SETTINGS.APPLICATION_FORM.MANUAL'| translate)}}
      </div>
    </div>
    <div class="w-25">
      <button
        mat-stroked-button
        (click)="settings()"
        class="ml-auto">
        <i class="material-icons">edit</i>
        {{'GROUP_DETAIL.SETTINGS.APPLICATION_FORM.SETTINGS_BUTTON' | translate}}
      </button>
    </div>
  </div>

  <mat-divider class="mb-2 mt-2"></mat-divider>

  <div class="w-100 d-flex">

    <app-refresh-button (refresh)="this.updateFormItems()"></app-refresh-button>

    <button
      mat-flat-button
      color="accent"
      class="mr-2"
      (click)="add()">
      {{'GROUP_DETAIL.SETTINGS.APPLICATION_FORM.ADD_BUTTON' | translate}}
    </button>

    <button
      mat-flat-button
      color="accent"
      class="mr-2"
      [disabled]="!itemsChanged"
      (click)="save()">
      <i class="material-icons">save</i>
      {{'VO_DETAIL.SETTINGS.APPLICATION_FORM.SAVE_BUTTON' | translate}}
    </button>

    <button
      mat-stroked-button
      class="mr-2"
      (click)="copy()">
      <i class="material-icons">file_copy</i>
      {{'GROUP_DETAIL.SETTINGS.APPLICATION_FORM.COPY_GROUP_BUTTON' | translate}}
    </button>

    <button
      mat-stroked-button
      (click)="preview()">
      <i class="material-icons">search</i>
      {{'GROUP_DETAIL.SETTINGS.APPLICATION_FORM.PREVIEW_BUTTON' | translate}}
    </button>
  </div>

  <app-alert color="info">
    {{'GROUP_DETAIL.SETTINGS.APPLICATION_FORM.DRAG_AND_DROP_INFO' | translate}}
  </app-alert>

  <app-application-form-list
    [loading]="loading"
    [applicationForm]="applicationForm"
    [applicationFormItems]="applicationFormItems"
    (applicationFormItemsChange)="changeItems($event)">
  </app-application-form-list>
</div>
<div *ngIf="!loading && noApplicationForm">
  <app-alert color="warn">{{'GROUP_DETAIL.SETTINGS.APPLICATION_FORM.NO_APPLICATION_FORM' | translate}}</app-alert>
  <button mat-stroked-button
          (click)="createEmptyApplicationForm()">
    {{'GROUP_DETAIL.SETTINGS.APPLICATION_FORM.CREATE_APPLICATION_FORM' | translate}}
  </button>

</div>
