<!--The min-height is a hack to prevent page scrolling on tab switching-->
<div style="min-height: 500px">
  <mat-tab-group [dynamicHeight]="true" [(selectedIndex)]="showTab">
    <mat-tab [label]="facility.name + ' (facility)'">

      <button mat-flat-button class="mr-2 mt-3" color="accent" (click)="onAddAttFacility()">
        {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.ADD' | translate}}
      </button>

      <button mat-flat-button class="mr-2 mt-3" color="accent" (click)="onSaveFacility()" [disabled]="selectionFacility.selected.length === 0">
        {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.SAVE' | translate}}
      </button>

      <perun-web-apps-attributes-list
        #FacilityAList
        (page)="pageChanged($event)"
        [pageSize]="pageSize"
        *ngIf="!!facilityAttributes"
        [attributes]="facilityAttributes"
        [selection]="selectionFacility">
      </perun-web-apps-attributes-list>
    </mat-tab>
    <mat-tab [label]="resource.name + ' (resource)'" *ngIf="!!resource">

      <button mat-flat-button class="mr-2 mt-3" color="accent" (click)="onAddAttResource()">
        {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.ADD' | translate}}
      </button>

      <button mat-flat-button class="mr-2 mt-3" color="accent" (click)="onSaveResource()" [disabled]="selectionResource.selected.length === 0">
        {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.SAVE' | translate}}
      </button>

      <perun-web-apps-attributes-list
        #ResourceAList
        (page)="pageChanged($event)"
        [pageSize]="pageSize"
        *ngIf="!!resourceAttributes"
        [attributes]="resourceAttributes"
        [selection]="selectionResource">
      </perun-web-apps-attributes-list>
    </mat-tab>
    <mat-tab [label]="group.name + ' (group)'" *ngIf="!!group">

      <button mat-flat-button class="mr-2 mt-3" color="accent" (click)="onAddAttGroup()">
        {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.ADD' | translate}}
      </button>

      <button mat-flat-button class="mr-2 mt-3" color="accent" (click)="onSaveGroup()" [disabled]="selectionGroup.selected.length === 0">
        {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.SAVE' | translate}}
      </button>

      <perun-web-apps-attributes-list
        #GroupAList
        (page)="pageChanged($event)"
        [pageSize]="pageSize"
        *ngIf="!!groupAttributes"
        [attributes]="groupAttributes"
        [selection]="selectionGroup">
      </perun-web-apps-attributes-list>
    </mat-tab>
    <mat-tab [label]="member.user.firstName + ' ' + member.user.lastName + ' (member)'" *ngIf="!!member">

      <button mat-flat-button class="mr-2 mt-3" color="accent" (click)="onAddAttMember()">
        {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.ADD' | translate}}
      </button>

      <button mat-flat-button class="mr-2 mt-3" color="accent" (click)="onSaveMember()" [disabled]="selectionMember.selected.length === 0">
        {{'SHARED_LIB.PERUN.SERVICES_CONFIGURATIONS.SAVE' | translate}}
      </button>

      <perun-web-apps-attributes-list
          #MemberAList
          (page)="pageChanged($event)"
          [pageSize]="pageSize"
          *ngIf="!!memberAttributes"
          [attributes]="memberAttributes"
          [selection]="selectionMember">
      </perun-web-apps-attributes-list>
    </mat-tab>
  </mat-tab-group>
</div>
